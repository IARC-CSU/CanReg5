/**
 * CanReg5 - a tool to input, store, check and analyse cancer registry data.
 * Copyright (C) 2008-2015  International Agency for Research on Cancer
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 *
 * @author Morten Johannes Ervik, CSU/IARC, ervikm@iarc.fr
 */
/*
 * OptionsFrame.java
 *
 * Created on 28 February 2008, 09:34
 */
package canreg.client.gui.management;

import canreg.client.gui.*;
import canreg.client.CanRegClientApp;
import canreg.client.LocalSettings;
import canreg.client.gui.tools.globalpopup.TechnicalError;
import canreg.common.Globals;
import java.awt.event.KeyEvent;
import java.io.IOException;
import java.io.InputStream;
import java.rmi.RemoteException;
import java.text.DateFormat;
import java.util.Arrays;
import java.util.Comparator;
import java.util.Date;
import java.util.LinkedList;
import java.util.List;
import java.util.Locale;
import java.util.Properties;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JFileChooser;
import javax.swing.JOptionPane;
import org.jdesktop.application.Action;

/**
 *
 * @author  morten
 */
public class OptionsFrame extends javax.swing.JInternalFrame {
    
    private static final Logger LOGGER = Logger.getLogger(OptionsFrame.class.getName());
    private CanRegClientView crcv;
    private LocalSettings localSettings;
    private Locale[] locales;
    private Properties appInfoProperties;

    /** Creates new form OptionsFrame
     * @param crcv 
     */
    public OptionsFrame(CanRegClientView crcv) {
        try {
            this.crcv = crcv;
            InputStream in = null;
            appInfoProperties = new Properties();
            //
            // load properties file
            //
            // get Application information
            //
            in = getClass().getResourceAsStream(Globals.APPINFO_PROPERTIES_PATH);
            appInfoProperties.load(in);
            in.close();
            initComponents();
            initValues();
        } catch (IOException ex) {
            LOGGER.log(Level.SEVERE, null, ex);
            new TechnicalError().errorDialog();
        }
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jButton1 = new javax.swing.JButton();
        jButton2 = new javax.swing.JButton();
        tabbedPane = new javax.swing.JTabbedPane();
        generalPanel = new javax.swing.JPanel();
        languagePanel = new javax.swing.JPanel();
        languageLabel = new javax.swing.JLabel();
        languageComboBox = new javax.swing.JComboBox();
        dateFormatComboBox = new javax.swing.JComboBox();
        languageLabel1 = new javax.swing.JLabel();
        lookAndFeelPanel = new javax.swing.JPanel();
        showOutlineCheckBox = new javax.swing.JCheckBox();
        fontNameLabel = new javax.swing.JLabel();
        fontNameTextField = new javax.swing.JTextField();
        fontSizeComboBox = new javax.swing.JComboBox();
        fontSizeLabel = new javax.swing.JLabel();
        themeLabel = new javax.swing.JLabel();
        themeComboBox = new javax.swing.JComboBox();
        jPanel1 = new javax.swing.JPanel();
        dataEntryLabel = new javax.swing.JLabel();
        dataEntryVersionComboBox = new javax.swing.JComboBox();
        newDataEntryVerticalSources = new javax.swing.JCheckBox();
        dataEntryDisplayVariableLabel = new javax.swing.JLabel();
        dataEntryDisplayVariableComboBox = new javax.swing.JComboBox();
        systemPanel = new javax.swing.JPanel();
        automaticBackupPanel = new javax.swing.JPanel();
        automaticbackupCheckBox = new javax.swing.JCheckBox();
        everyLabel = new javax.swing.JLabel();
        numberOfDaysTextField = new javax.swing.JTextField();
        daysLabel = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        backUpPerformedTextField = new javax.swing.JTextField();
        advancedPanel = new javax.swing.JPanel();
        versionPanel = new javax.swing.JPanel();
        versionInstalledLabel = new javax.swing.JLabel();
        versionInstalledTextField = new javax.swing.JTextField();
        latestVersionLabel = new javax.swing.JLabel();
        latestVersionTextField = new javax.swing.JTextField();
        downloadLatestButton = new javax.swing.JButton();
        checkButton = new javax.swing.JButton();
        downloadLatestButton1 = new javax.swing.JButton();
        timersPanel = new javax.swing.JPanel();
        clientToServerLabel = new javax.swing.JLabel();
        clientSessionsCheckLabel = new javax.swing.JLabel();
        clientToServerTextField = new javax.swing.JFormattedTextField();
        clientSessionsCheckTextField = new javax.swing.JFormattedTextField();
        pathsPanel = new javax.swing.JPanel();
        rPanel = new javax.swing.JPanel();
        rInstallationLabel = new javax.swing.JLabel();
        rInstallationTextField = new javax.swing.JTextField();
        rInstallationBrowseButton = new javax.swing.JButton();
        gsPanel = new javax.swing.JPanel();
        gsInstallationLabel = new javax.swing.JLabel();
        gsInstallationTextField = new javax.swing.JTextField();
        gsInstallationBrowseButton = new javax.swing.JButton();

        setClosable(true);
        org.jdesktop.application.ResourceMap resourceMap = org.jdesktop.application.Application.getInstance(canreg.client.CanRegClientApp.class).getContext().getResourceMap(OptionsFrame.class);
        setTitle(resourceMap.getString("Form.title")); // NOI18N
        setFrameIcon(resourceMap.getIcon("Form.frameIcon")); // NOI18N
        setName("Form"); // NOI18N
        try {
            setSelected(true);
        } catch (java.beans.PropertyVetoException e1) {
            e1.printStackTrace();
        }

        javax.swing.ActionMap actionMap = org.jdesktop.application.Application.getInstance(canreg.client.CanRegClientApp.class).getContext().getActionMap(OptionsFrame.class, this);
        jButton1.setAction(actionMap.get("okAction")); // NOI18N
        jButton1.setIcon(resourceMap.getIcon("jButton1.icon")); // NOI18N
        jButton1.setText(resourceMap.getString("jButton1.text")); // NOI18N
        jButton1.setName("jButton1"); // NOI18N

        jButton2.setAction(actionMap.get("cancelAction")); // NOI18N
        jButton2.setIcon(resourceMap.getIcon("jButton2.icon")); // NOI18N
        jButton2.setName("jButton2"); // NOI18N

        tabbedPane.setName("tabbedPane"); // NOI18N

        generalPanel.setName("generalPanel"); // NOI18N

        languagePanel.setBorder(javax.swing.BorderFactory.createTitledBorder(resourceMap.getString("languagePanel.border.title"))); // NOI18N
        languagePanel.setName("languagePanel"); // NOI18N

        languageLabel.setText(resourceMap.getString("languageLabel.text")); // NOI18N
        languageLabel.setToolTipText(resourceMap.getString("languageLabel.toolTipText")); // NOI18N
        languageLabel.setName("languageLabel"); // NOI18N

        languageComboBox.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "English", "Arabic", "Spanish", "Persian" }));
        languageComboBox.setToolTipText(resourceMap.getString("languageComboBox.toolTipText")); // NOI18N
        languageComboBox.setName("languageComboBox"); // NOI18N

        dateFormatComboBox.setEditable(true);
        dateFormatComboBox.setToolTipText(resourceMap.getString("dateFormatComboBox.toolTipText")); // NOI18N
        dateFormatComboBox.setName("dateFormatComboBox"); // NOI18N
        dateFormatComboBox.setOpaque(false);
        dateFormatComboBox.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mousePressed(java.awt.event.MouseEvent evt) {
                dateFormatComboBoxMousePressed(evt);
            }
        });

        languageLabel1.setText(resourceMap.getString("languageLabel1.text")); // NOI18N
        languageLabel1.setName("languageLabel1"); // NOI18N

        javax.swing.GroupLayout languagePanelLayout = new javax.swing.GroupLayout(languagePanel);
        languagePanel.setLayout(languagePanelLayout);
        languagePanelLayout.setHorizontalGroup(
            languagePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(languagePanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(languagePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(languageLabel)
                    .addComponent(languageLabel1))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(languagePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(dateFormatComboBox, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(languageComboBox, 0, 1, Short.MAX_VALUE))
                .addContainerGap())
        );
        languagePanelLayout.setVerticalGroup(
            languagePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(languagePanelLayout.createSequentialGroup()
                .addGroup(languagePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(languageLabel)
                    .addComponent(languageComboBox, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGroup(languagePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(dateFormatComboBox, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(languageLabel1))
                .addGap(25, 25, 25))
        );

        lookAndFeelPanel.setBorder(javax.swing.BorderFactory.createTitledBorder(resourceMap.getString("lookAndFeelPanel.border.title"))); // NOI18N
        lookAndFeelPanel.setToolTipText(resourceMap.getString("lookAndFeelPanel.toolTipText")); // NOI18N
        lookAndFeelPanel.setName("lookAndFeelPanel"); // NOI18N

        showOutlineCheckBox.setText(resourceMap.getString("showOutlineCheckBox.text")); // NOI18N
        showOutlineCheckBox.setToolTipText(resourceMap.getString("showOutlineCheckBox.toolTipText")); // NOI18N
        showOutlineCheckBox.setName("showOutlineCheckBox"); // NOI18N

        fontNameLabel.setText(resourceMap.getString("fontNameLabel.text")); // NOI18N
        fontNameLabel.setToolTipText(resourceMap.getString("fontNameLabel.toolTipText")); // NOI18N
        fontNameLabel.setName("fontNameLabel"); // NOI18N

        fontNameTextField.setText(resourceMap.getString("fontNameTextField.text")); // NOI18N
        fontNameTextField.setToolTipText(resourceMap.getString("fontNameTextField.toolTipText")); // NOI18N
        fontNameTextField.setName("fontNameTextField"); // NOI18N

        fontSizeComboBox.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "Small", "Medium", "Big" }));
        fontSizeComboBox.setSelectedIndex(1);
        fontSizeComboBox.setToolTipText(resourceMap.getString("fontSizeComboBox.toolTipText")); // NOI18N
        fontSizeComboBox.setName("fontSizeComboBox"); // NOI18N

        fontSizeLabel.setText(resourceMap.getString("fontSizeLabel.text")); // NOI18N
        fontSizeLabel.setToolTipText(resourceMap.getString("fontSizeLabel.toolTipText")); // NOI18N
        fontSizeLabel.setName("fontSizeLabel"); // NOI18N

        themeLabel.setText(resourceMap.getString("themeLabel.text")); // NOI18N
        themeLabel.setToolTipText(resourceMap.getString("themeLabel.toolTipText")); // NOI18N
        themeLabel.setName("themeLabel"); // NOI18N

        themeComboBox.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "System", "Light", "Dark" }));
        themeComboBox.setToolTipText(resourceMap.getString("themeComboBox.toolTipText")); // NOI18N
        themeComboBox.setName("themeComboBox"); // NOI18N

        javax.swing.GroupLayout lookAndFeelPanelLayout = new javax.swing.GroupLayout(lookAndFeelPanel);
        lookAndFeelPanel.setLayout(lookAndFeelPanelLayout);
        lookAndFeelPanelLayout.setHorizontalGroup(
            lookAndFeelPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(lookAndFeelPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(lookAndFeelPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(lookAndFeelPanelLayout.createSequentialGroup()
                        .addComponent(showOutlineCheckBox, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addGap(18, 18, 18))
                    .addGroup(lookAndFeelPanelLayout.createSequentialGroup()
                        .addGroup(lookAndFeelPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(fontNameLabel)
                            .addComponent(fontSizeLabel)
                            .addComponent(themeLabel))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(lookAndFeelPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(themeComboBox, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(fontSizeComboBox, javax.swing.GroupLayout.Alignment.TRAILING, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(fontNameTextField))
                        .addContainerGap())))
        );
        lookAndFeelPanelLayout.setVerticalGroup(
            lookAndFeelPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(lookAndFeelPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(lookAndFeelPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(themeComboBox, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(themeLabel))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(lookAndFeelPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(fontNameLabel)
                    .addComponent(fontNameTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(lookAndFeelPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(fontSizeComboBox, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(fontSizeLabel))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(showOutlineCheckBox)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        jPanel1.setBorder(javax.swing.BorderFactory.createTitledBorder(resourceMap.getString("jPanel1.border.title"))); // NOI18N
        jPanel1.setName("jPanel1"); // NOI18N

        dataEntryLabel.setText(resourceMap.getString("dataEntryLabel.text")); // NOI18N
        dataEntryLabel.setName("dataEntryLabel"); // NOI18N

        dataEntryVersionComboBox.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "New Version", "Original Version" }));
        dataEntryVersionComboBox.setName("dataEntryVersionComboBox"); // NOI18N

        newDataEntryVerticalSources.setText(resourceMap.getString("newDataEntryVerticalSources.text")); // NOI18N
        newDataEntryVerticalSources.setToolTipText(resourceMap.getString("newDataEntryVerticalSources.toolTipText")); // NOI18N
        newDataEntryVerticalSources.setName("newDataEntryVerticalSources"); // NOI18N

        dataEntryDisplayVariableLabel.setText(resourceMap.getString("dataEntryDisplayVariableLabel.text")); // NOI18N
        dataEntryDisplayVariableLabel.setName("dataEntryDisplayVariableLabel"); // NOI18N

        dataEntryDisplayVariableComboBox.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "FULL", "SHORT", "ENGLISH", "STANDARD" }));
        dataEntryDisplayVariableComboBox.setName("dataEntryDisplayVariableComboBox"); // NOI18N

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(newDataEntryVerticalSources, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                        .addGap(0, 4, Short.MAX_VALUE)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addComponent(dataEntryLabel)
                                .addGap(18, 18, 18)
                                .addComponent(dataEntryVersionComboBox, javax.swing.GroupLayout.PREFERRED_SIZE, 402, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addComponent(dataEntryDisplayVariableLabel)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(dataEntryDisplayVariableComboBox, javax.swing.GroupLayout.PREFERRED_SIZE, 399, javax.swing.GroupLayout.PREFERRED_SIZE)))))
                .addContainerGap())
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(dataEntryLabel)
                    .addComponent(dataEntryVersionComboBox, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(newDataEntryVerticalSources)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(dataEntryDisplayVariableComboBox, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(dataEntryDisplayVariableLabel))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout generalPanelLayout = new javax.swing.GroupLayout(generalPanel);
        generalPanel.setLayout(generalPanelLayout);
        generalPanelLayout.setHorizontalGroup(
            generalPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(generalPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(generalPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(lookAndFeelPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(languagePanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addContainerGap())
        );
        generalPanelLayout.setVerticalGroup(
            generalPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(generalPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(languagePanel, javax.swing.GroupLayout.PREFERRED_SIZE, 85, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(lookAndFeelPanel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        tabbedPane.addTab(resourceMap.getString("generalPanel.TabConstraints.tabTitle"), generalPanel); // NOI18N

        systemPanel.setName("systemPanel"); // NOI18N

        automaticBackupPanel.setBorder(javax.swing.BorderFactory.createTitledBorder(resourceMap.getString("automaticBackupPanel.border.title"))); // NOI18N
        automaticBackupPanel.setName("automaticBackupPanel"); // NOI18N

        automaticbackupCheckBox.setSelected(true);
        automaticbackupCheckBox.setText(resourceMap.getString("automaticbackupCheckBox.text")); // NOI18N
        automaticbackupCheckBox.setToolTipText(resourceMap.getString("automaticbackupCheckBox.toolTipText")); // NOI18N
        automaticbackupCheckBox.setName("automaticbackupCheckBox"); // NOI18N

        everyLabel.setText(resourceMap.getString("everyLabel.text")); // NOI18N
        everyLabel.setName("everyLabel"); // NOI18N

        numberOfDaysTextField.setText(resourceMap.getString("numberOfDaysTextField.text")); // NOI18N
        numberOfDaysTextField.setName("numberOfDaysTextField"); // NOI18N

        daysLabel.setText(resourceMap.getString("daysLabel.text")); // NOI18N
        daysLabel.setName("daysLabel"); // NOI18N

        jLabel2.setText(resourceMap.getString("jLabel2.text")); // NOI18N
        jLabel2.setName("jLabel2"); // NOI18N

        backUpPerformedTextField.setEditable(false);
        backUpPerformedTextField.setHorizontalAlignment(javax.swing.JTextField.RIGHT);
        backUpPerformedTextField.setText(resourceMap.getString("backUpPerformedTextField.text")); // NOI18N
        backUpPerformedTextField.setFocusable(false);
        backUpPerformedTextField.setName("backUpPerformedTextField"); // NOI18N

        javax.swing.GroupLayout automaticBackupPanelLayout = new javax.swing.GroupLayout(automaticBackupPanel);
        automaticBackupPanel.setLayout(automaticBackupPanelLayout);
        automaticBackupPanelLayout.setHorizontalGroup(
            automaticBackupPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(automaticBackupPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(automaticBackupPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(automaticBackupPanelLayout.createSequentialGroup()
                        .addComponent(automaticbackupCheckBox)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 257, Short.MAX_VALUE))
                    .addGroup(automaticBackupPanelLayout.createSequentialGroup()
                        .addComponent(jLabel2)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)))
                .addGroup(automaticBackupPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addGroup(automaticBackupPanelLayout.createSequentialGroup()
                        .addComponent(everyLabel)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(numberOfDaysTextField, javax.swing.GroupLayout.PREFERRED_SIZE, 54, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(daysLabel))
                    .addComponent(backUpPerformedTextField)))
        );
        automaticBackupPanelLayout.setVerticalGroup(
            automaticBackupPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(automaticBackupPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(automaticBackupPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(automaticbackupCheckBox)
                    .addComponent(numberOfDaysTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(daysLabel)
                    .addComponent(everyLabel))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(automaticBackupPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(backUpPerformedTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel2))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout systemPanelLayout = new javax.swing.GroupLayout(systemPanel);
        systemPanel.setLayout(systemPanelLayout);
        systemPanelLayout.setHorizontalGroup(
            systemPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, systemPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(automaticBackupPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );
        systemPanelLayout.setVerticalGroup(
            systemPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(systemPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(automaticBackupPanel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(280, Short.MAX_VALUE))
        );

        tabbedPane.addTab(resourceMap.getString("systemPanel.TabConstraints.tabTitle"), systemPanel); // NOI18N

        advancedPanel.setName("advancedPanel"); // NOI18N

        versionPanel.setBorder(javax.swing.BorderFactory.createTitledBorder(resourceMap.getString("versionPanel.border.title"))); // NOI18N
        versionPanel.setName("versionPanel"); // NOI18N

        versionInstalledLabel.setText(resourceMap.getString("versionInstalledLabel.text")); // NOI18N
        versionInstalledLabel.setName("versionInstalledLabel"); // NOI18N

        versionInstalledTextField.setEditable(false);
        versionInstalledTextField.setText(resourceMap.getString("versionInstalledTextField.text")); // NOI18N
        versionInstalledTextField.setToolTipText(resourceMap.getString("versionInstalledTextField.toolTipText")); // NOI18N
        versionInstalledTextField.setName("versionInstalledTextField"); // NOI18N

        latestVersionLabel.setText(resourceMap.getString("latestVersionLabel.text")); // NOI18N
        latestVersionLabel.setName("latestVersionLabel"); // NOI18N

        latestVersionTextField.setEditable(false);
        latestVersionTextField.setText(resourceMap.getString("latestVersionTextField.text")); // NOI18N
        latestVersionTextField.setToolTipText(resourceMap.getString("latestVersionTextField.toolTipText")); // NOI18N
        latestVersionTextField.setEnabled(false);
        latestVersionTextField.setName("latestVersionTextField"); // NOI18N

        downloadLatestButton.setAction(actionMap.get("downloadLatestVersionAction")); // NOI18N
        downloadLatestButton.setForeground(resourceMap.getColor("downloadLatestButton.foreground")); // NOI18N
        downloadLatestButton.setToolTipText(resourceMap.getString("downloadLatestButton.toolTipText")); // NOI18N
        downloadLatestButton.setBorder(null);
        downloadLatestButton.setBorderPainted(false);
        downloadLatestButton.setContentAreaFilled(false);
        downloadLatestButton.setName("downloadLatestButton"); // NOI18N

        checkButton.setAction(actionMap.get("checkLatestVersionAction")); // NOI18N
        checkButton.setText(resourceMap.getString("checkButton.text")); // NOI18N
        checkButton.setToolTipText(resourceMap.getString("checkButton.toolTipText")); // NOI18N
        checkButton.setName("checkButton"); // NOI18N

        downloadLatestButton1.setAction(actionMap.get("viewChangeLogAction")); // NOI18N
        downloadLatestButton1.setForeground(resourceMap.getColor("downloadLatestButton1.foreground")); // NOI18N
        downloadLatestButton1.setText(resourceMap.getString("downloadLatestButton1.text")); // NOI18N
        downloadLatestButton1.setToolTipText(resourceMap.getString("downloadLatestButton1.toolTipText")); // NOI18N
        downloadLatestButton1.setBorder(null);
        downloadLatestButton1.setBorderPainted(false);
        downloadLatestButton1.setContentAreaFilled(false);
        downloadLatestButton1.setName("downloadLatestButton1"); // NOI18N

        javax.swing.GroupLayout versionPanelLayout = new javax.swing.GroupLayout(versionPanel);
        versionPanel.setLayout(versionPanelLayout);
        versionPanelLayout.setHorizontalGroup(
            versionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(versionPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(versionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(latestVersionLabel)
                    .addComponent(versionInstalledLabel))
                .addGap(8, 8, 8)
                .addGroup(versionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(versionPanelLayout.createSequentialGroup()
                        .addComponent(downloadLatestButton)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 80, Short.MAX_VALUE)
                        .addComponent(downloadLatestButton1))
                    .addComponent(latestVersionTextField, javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(versionInstalledTextField, javax.swing.GroupLayout.Alignment.TRAILING))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(checkButton))
        );
        versionPanelLayout.setVerticalGroup(
            versionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(versionPanelLayout.createSequentialGroup()
                .addGroup(versionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(versionInstalledLabel)
                    .addComponent(versionInstalledTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(versionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(latestVersionLabel)
                    .addComponent(checkButton)
                    .addComponent(latestVersionTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGroup(versionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(downloadLatestButton)
                    .addComponent(downloadLatestButton1)))
        );

        timersPanel.setBorder(javax.swing.BorderFactory.createTitledBorder(resourceMap.getString("timersPanel.border.title"))); // NOI18N
        timersPanel.setName("timersPanel"); // NOI18N

        clientToServerLabel.setText(resourceMap.getString("clientToServerLabel.text")); // NOI18N
        clientToServerLabel.setName("clientToServerLabel"); // NOI18N

        clientSessionsCheckLabel.setText(resourceMap.getString("clientSessionsCheckLabel.text")); // NOI18N
        clientSessionsCheckLabel.setName("clientSessionsCheckLabel"); // NOI18N

        clientToServerTextField.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.NumberFormatter(new java.text.DecimalFormat("#0"))));
        clientToServerTextField.setName("clientToServerTextField"); // NOI18N
        clientToServerTextField.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                clientToServerTextFieldKeyTyped(evt);
            }
        });

        clientSessionsCheckTextField.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.NumberFormatter(new java.text.DecimalFormat("#0"))));
        clientSessionsCheckTextField.setToolTipText(resourceMap.getString("clientSessionsCheckTextField.toolTipText")); // NOI18N
        clientSessionsCheckTextField.setName("clientSessionsCheckTextField"); // NOI18N
        clientSessionsCheckTextField.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                clientToServerTextFieldKeyTyped(evt);
            }
        });

        javax.swing.GroupLayout timersPanelLayout = new javax.swing.GroupLayout(timersPanel);
        timersPanel.setLayout(timersPanelLayout);
        timersPanelLayout.setHorizontalGroup(
            timersPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(timersPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(timersPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(clientSessionsCheckLabel)
                    .addComponent(clientToServerLabel))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(timersPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(clientSessionsCheckTextField, javax.swing.GroupLayout.PREFERRED_SIZE, 83, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(clientToServerTextField, javax.swing.GroupLayout.PREFERRED_SIZE, 83, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        timersPanelLayout.setVerticalGroup(
            timersPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(timersPanelLayout.createSequentialGroup()
                .addGroup(timersPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(clientToServerLabel)
                    .addComponent(clientToServerTextField, javax.swing.GroupLayout.PREFERRED_SIZE, 28, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(timersPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(clientSessionsCheckLabel)
                    .addComponent(clientSessionsCheckTextField, javax.swing.GroupLayout.DEFAULT_SIZE, 29, Short.MAX_VALUE))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout advancedPanelLayout = new javax.swing.GroupLayout(advancedPanel);
        advancedPanel.setLayout(advancedPanelLayout);
        advancedPanelLayout.setHorizontalGroup(
            advancedPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(advancedPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(advancedPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(versionPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(timersPanel, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addContainerGap())
        );
        advancedPanelLayout.setVerticalGroup(
            advancedPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(advancedPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(versionPanel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(timersPanel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(170, Short.MAX_VALUE))
        );

        tabbedPane.addTab(resourceMap.getString("advancedPanel.TabConstraints.tabTitle"), advancedPanel); // NOI18N

        pathsPanel.setName("pathsPanel"); // NOI18N

        rPanel.setBorder(javax.swing.BorderFactory.createTitledBorder(resourceMap.getString("rPanel.border.title"))); // NOI18N
        rPanel.setName("rPanel"); // NOI18N

        rInstallationLabel.setText(resourceMap.getString("rInstallationLabel.text")); // NOI18N
        rInstallationLabel.setName("rInstallationLabel"); // NOI18N

        rInstallationTextField.setText(resourceMap.getString("rInstallationTextField.text")); // NOI18N
        rInstallationTextField.setToolTipText(resourceMap.getString("rInstallationTextField.toolTipText")); // NOI18N
        rInstallationTextField.setName("rInstallationTextField"); // NOI18N

        rInstallationBrowseButton.setAction(actionMap.get("browseForR")); // NOI18N
        rInstallationBrowseButton.setText(resourceMap.getString("rInstallationBrowseButton.text")); // NOI18N
        rInstallationBrowseButton.setName("rInstallationBrowseButton"); // NOI18N

        javax.swing.GroupLayout rPanelLayout = new javax.swing.GroupLayout(rPanel);
        rPanel.setLayout(rPanelLayout);
        rPanelLayout.setHorizontalGroup(
            rPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(rPanelLayout.createSequentialGroup()
                .addComponent(rInstallationLabel)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(rInstallationTextField, javax.swing.GroupLayout.DEFAULT_SIZE, 402, Short.MAX_VALUE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(rInstallationBrowseButton)
                .addContainerGap())
        );
        rPanelLayout.setVerticalGroup(
            rPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(rPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(rInstallationLabel)
                .addComponent(rInstallationTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(rInstallationBrowseButton))
        );

        gsPanel.setBorder(javax.swing.BorderFactory.createTitledBorder(resourceMap.getString("gsPanel.border.title"))); // NOI18N
        gsPanel.setName("gsPanel"); // NOI18N

        gsInstallationLabel.setText(resourceMap.getString("gsInstallationLabel.text")); // NOI18N
        gsInstallationLabel.setName("gsInstallationLabel"); // NOI18N

        gsInstallationTextField.setToolTipText(resourceMap.getString("gsInstallationTextField.toolTipText")); // NOI18N
        gsInstallationTextField.setName("gsInstallationTextField"); // NOI18N

        gsInstallationBrowseButton.setAction(actionMap.get("browseForGS")); // NOI18N
        gsInstallationBrowseButton.setName("gsInstallationBrowseButton"); // NOI18N

        javax.swing.GroupLayout gsPanelLayout = new javax.swing.GroupLayout(gsPanel);
        gsPanel.setLayout(gsPanelLayout);
        gsPanelLayout.setHorizontalGroup(
            gsPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(gsPanelLayout.createSequentialGroup()
                .addComponent(gsInstallationLabel)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(gsInstallationTextField, javax.swing.GroupLayout.DEFAULT_SIZE, 396, Short.MAX_VALUE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(gsInstallationBrowseButton)
                .addContainerGap())
        );
        gsPanelLayout.setVerticalGroup(
            gsPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(gsPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(gsInstallationLabel)
                .addComponent(gsInstallationTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(gsInstallationBrowseButton))
        );

        javax.swing.GroupLayout pathsPanelLayout = new javax.swing.GroupLayout(pathsPanel);
        pathsPanel.setLayout(pathsPanelLayout);
        pathsPanelLayout.setHorizontalGroup(
            pathsPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pathsPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(pathsPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(rPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(gsPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addContainerGap())
        );
        pathsPanelLayout.setVerticalGroup(
            pathsPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pathsPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(rPanel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(gsPanel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(273, Short.MAX_VALUE))
        );

        tabbedPane.addTab(resourceMap.getString("pathsPanel.TabConstraints.tabTitle"), pathsPanel); // NOI18N

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(tabbedPane)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jButton2)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jButton1)))
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(tabbedPane)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jButton1)
                    .addComponent(jButton2))
                .addContainerGap())
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void dateFormatComboBoxMousePressed(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_dateFormatComboBoxMousePressed
        // TODO add your handling code here:}//GEN-LAST:event_dateFormatComboBoxMousePressed
    }
    private void clientToServerTextFieldKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_clientToServerTextFieldKeyTyped
        /* Restrict input to only integers */
        char c = evt.getKeyChar();
        if (!((c >= '0') && (c <= '9') ||
            (c == KeyEvent.VK_BACK_SPACE) ||
            (c == KeyEvent.VK_ENTER) ||
            (c == KeyEvent.VK_DELETE))) {
            getToolkit().beep();
            evt.consume();
        } 
    }//GEN-LAST:event_clientToServerTextFieldKeyTyped
    

    @Action
    public void cancelAction() {
        this.dispose();
    }

    @Action
    public void okAction() {
        // First test filds that can be tested
        if (valuesOK()) {
            // store all info
            saveValues();
            // apply new settings
            crcv.applyPreferences();
            //and close
            this.dispose();
        } else {
        }
    }
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JPanel advancedPanel;
    private javax.swing.JPanel automaticBackupPanel;
    private javax.swing.JCheckBox automaticbackupCheckBox;
    private javax.swing.JTextField backUpPerformedTextField;
    private javax.swing.JButton checkButton;
    private javax.swing.JLabel clientSessionsCheckLabel;
    private javax.swing.JFormattedTextField clientSessionsCheckTextField;
    private javax.swing.JLabel clientToServerLabel;
    private javax.swing.JFormattedTextField clientToServerTextField;
    private javax.swing.JComboBox dataEntryDisplayVariableComboBox;
    private javax.swing.JLabel dataEntryDisplayVariableLabel;
    private javax.swing.JLabel dataEntryLabel;
    private javax.swing.JComboBox dataEntryVersionComboBox;
    private javax.swing.JComboBox dateFormatComboBox;
    private javax.swing.JLabel daysLabel;
    private javax.swing.JButton downloadLatestButton;
    private javax.swing.JButton downloadLatestButton1;
    private javax.swing.JLabel everyLabel;
    private javax.swing.JLabel fontNameLabel;
    private javax.swing.JTextField fontNameTextField;
    private javax.swing.JComboBox fontSizeComboBox;
    private javax.swing.JLabel fontSizeLabel;
    private javax.swing.JPanel generalPanel;
    private javax.swing.JButton gsInstallationBrowseButton;
    private javax.swing.JLabel gsInstallationLabel;
    private javax.swing.JTextField gsInstallationTextField;
    private javax.swing.JPanel gsPanel;
    private javax.swing.JButton jButton1;
    private javax.swing.JButton jButton2;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JComboBox languageComboBox;
    private javax.swing.JLabel languageLabel;
    private javax.swing.JLabel languageLabel1;
    private javax.swing.JPanel languagePanel;
    private javax.swing.JLabel latestVersionLabel;
    private javax.swing.JTextField latestVersionTextField;
    private javax.swing.JPanel lookAndFeelPanel;
    private javax.swing.JCheckBox newDataEntryVerticalSources;
    private javax.swing.JTextField numberOfDaysTextField;
    private javax.swing.JPanel pathsPanel;
    private javax.swing.JButton rInstallationBrowseButton;
    private javax.swing.JLabel rInstallationLabel;
    private javax.swing.JTextField rInstallationTextField;
    private javax.swing.JPanel rPanel;
    private javax.swing.JCheckBox showOutlineCheckBox;
    private javax.swing.JPanel systemPanel;
    private javax.swing.JTabbedPane tabbedPane;
    private javax.swing.JComboBox themeComboBox;
    private javax.swing.JLabel themeLabel;
    private javax.swing.JPanel timersPanel;
    private javax.swing.JLabel versionInstalledLabel;
    private javax.swing.JTextField versionInstalledTextField;
    private javax.swing.JPanel versionPanel;
    // End of variables declaration//GEN-END:variables

    private void initValues() {
        localSettings = CanRegClientApp.getApplication().getLocalSettings();
        // Languages
        locales = Locale.getAvailableLocales();
        Arrays.sort(locales, new Comparator<Locale>() {
            @Override
            public int compare(Locale o1, Locale o2) {
                return o1.getDisplayName(o1).compareToIgnoreCase(o2.getDisplayName(o2));
            }
        });
        String[] localeNames = new String[locales.length];
        Locale currentLocale = localSettings.getLocale();
        int currentLocaleIndex = 0;
        int numberOfElementsAdded = 0;
        LinkedList localesList = new LinkedList();
        LinkedList localesNamesList = new LinkedList();

        List<String> translatedLocales = Arrays.asList(Globals.TRANSLATED_LOCALES);

        for (int i = 0; i < locales.length; i++) {
            // String country = locales[i].getDisplayCountry(locales[i]);
            localeNames[i] = locales[i].getDisplayName(locales[i]);

            if (translatedLocales.contains(locales[i].toString())) {
                if (locales[i].toString().equalsIgnoreCase(currentLocale.toString())) {
                    currentLocaleIndex = numberOfElementsAdded;
                }
                localesList.add(locales[i]);
                localesNamesList.add(locales[i].getDisplayName(locales[i]));
                numberOfElementsAdded++;
            }
        }
        locales = (Locale[]) localesList.toArray(locales);
        languageComboBox.setModel(new javax.swing.DefaultComboBoxModel(localesNamesList.toArray()));
        languageComboBox.setSelectedIndex(currentLocaleIndex);

        showOutlineCheckBox.setSelected(localSettings.isOutlineDragMode());
        // CanReg verison
        String versionString = "";
        for (String part : Globals.versionStringParts) {
            versionString += appInfoProperties.getProperty(part);
        }
        versionInstalledTextField.setText(versionString);
        try {
            // Backup
            Date backUpDate = CanRegClientApp.getApplication().getDateOfLastBackUp();
            if (backUpDate != null) {
                backUpPerformedTextField.setText(DateFormat.getDateInstance().format(backUpDate));
            }
        } catch (SecurityException | RemoteException ex) {
            LOGGER.log(Level.INFO, null, ex);
            new TechnicalError().errorDialog();

        }

        String backUpEvery = localSettings.getProperty(LocalSettings.BACKUP_EVERY_KEY);
        numberOfDaysTextField.setText(backUpEvery);
        automaticbackupCheckBox.setSelected(localSettings.isAutoBackup());

        String rPath = localSettings.getProperty(LocalSettings.R_PATH);
        rInstallationTextField.setText(rPath);

        String gsPath = localSettings.getProperty(LocalSettings.GS_PATH);
        gsInstallationTextField.setText(gsPath);

        String fontName = localSettings.getProperty(LocalSettings.FONT_NAME_KEY);
        if (fontName == null || fontName.length() == 0) {
            fontName = LocalSettings.FONT_NAME_DEFAULT;
        }
        fontNameTextField.setText(fontName);

        String fontSize = localSettings.getProperty(LocalSettings.FONT_SIZE_KEY);
        fontSizeComboBox.setSelectedItem(fontSize);
        
        for(String df : Globals.DATE_FORMAT_STRINGS_ARRAY) {
            dateFormatComboBox.addItem(df);
        }
        dateFormatComboBox.setSelectedItem(localSettings.getDateFormatString());
        
        newDataEntryVerticalSources.setSelected(localSettings.isDataEntryVerticalSources());
        String dataEntryVersion = localSettings.getProperty(LocalSettings.DATA_ENTRY_VERSION_KEY);
        dataEntryVersionComboBox.setSelectedItem(dataEntryVersion);

        dataEntryDisplayVariableComboBox.setSelectedItem(localSettings.getDisplayVariableType().toString());
        
        clientToServerTextField.setText(localSettings.getProperty(LocalSettings.CLIENT_TO_SERVER_PING_KEY));
        clientSessionsCheckTextField.setText(localSettings.getProperty(LocalSettings.CLIENT_SESSIONS_CHECK_KEY));
        
        String theme = localSettings.getProperty(LocalSettings.LOOK_AND_FEEL_KEY);
        themeComboBox.setSelectedItem(theme);
    }

    private String getNewestVersionNumber() {
        String latestVersionString = canreg.common.Tools.getFileFromURL(Globals.newestVersionURLString);
        return latestVersionString;
    }

    private boolean valuesOK() {
        boolean valuesOK = true;
        if (automaticbackupCheckBox.isSelected()) {
            try {
                int numberOfDays = Integer.parseInt(numberOfDaysTextField.getText());
                if (numberOfDays < 1) {
                    JOptionPane.showInternalMessageDialog(
                            CanRegClientApp.getApplication().getMainFrame().getContentPane(),
                            java.util.ResourceBundle.getBundle("canreg/client/gui/management/resources/OptionsFrame").getString("NUMBER_TOO_LOW."),
                            java.util.ResourceBundle.getBundle("canreg/client/gui/management/resources/OptionsFrame").getString("ERROR_IN_AUTOMATIC_BACKUP_OPTIONS."), JOptionPane.ERROR_MESSAGE);
                    valuesOK = false;
                }
            } catch (NumberFormatException nfe) {
                JOptionPane.showInternalMessageDialog(
                        CanRegClientApp.getApplication().getMainFrame().getContentPane(),
                        numberOfDaysTextField.getText() + " " + java.util.ResourceBundle.getBundle("canreg/client/gui/management/resources/OptionsFrame").getString("IS_NOT_A_NUMBER."),
                        java.util.ResourceBundle.getBundle("canreg/client/gui/management/resources/OptionsFrame").getString("ERROR_IN_AUTOMATIC_BACKUP_OPTIONS."), JOptionPane.ERROR_MESSAGE);
                valuesOK = false;
            }
        }
        return valuesOK;
    }

    private void saveValues() {
        // save values
        // localSettings.setLocale(Globals.LANGUAGES_AVAILABLE[languageComboBox.getSelectedIndex()]);
        localSettings.setLocale(locales[languageComboBox.getSelectedIndex()].toString());

        if (showOutlineCheckBox.isSelected()) {
            localSettings.setOutlineDragMode(true);
        } else {
            localSettings.setOutlineDragMode(false);
        }

        if (automaticbackupCheckBox.isSelected()) {
            localSettings.setAutomaticBackup(true);
            localSettings.setProperty(LocalSettings.BACKUP_EVERY_KEY, numberOfDaysTextField.getText());
        } else {
            localSettings.setAutomaticBackup(false);
        }
        localSettings.setProperty(LocalSettings.R_PATH, rInstallationTextField.getText());
        localSettings.setProperty(LocalSettings.GS_PATH, gsInstallationTextField.getText());

        localSettings.setProperty(LocalSettings.FONT_NAME_KEY, fontNameTextField.getText());
        localSettings.setProperty(LocalSettings.FONT_SIZE_KEY, fontSizeComboBox.getSelectedItem().toString());

        localSettings.setProperty(LocalSettings.DATE_FORMAT_KEY, dateFormatComboBox.getSelectedItem().toString());
        localSettings.setProperty(LocalSettings.DISPLAY_VARIABLE_TYPE_KEY, dataEntryDisplayVariableComboBox.getSelectedItem().toString());

        localSettings.setProperty(LocalSettings.DATA_ENTRY_VERSION_KEY, dataEntryVersionComboBox.getSelectedItem().toString());
        if (newDataEntryVerticalSources.isSelected()) {
            localSettings.setDataEntryVerticalSources(true);
        } else {
            localSettings.setDataEntryVerticalSources(false);
        }
        
        localSettings.setProperty(LocalSettings.CLIENT_TO_SERVER_PING_KEY, clientToServerTextField.getText());
        localSettings.setProperty(LocalSettings.CLIENT_SESSIONS_CHECK_KEY, clientSessionsCheckTextField.getText());
        
        localSettings.setProperty(LocalSettings.LOOK_AND_FEEL_KEY, themeComboBox.getSelectedItem().toString());
        
        // write settings to file
        localSettings.writeSettings();
    }

    /**
     * 
     */
    @Action
    public void downloadLatestVersionAction() {
        try {
            canreg.common.Tools.browse(Globals.downloadCanRegURL);
        } catch (IOException ex) {
            LOGGER.log(Level.SEVERE, null, ex);
            new TechnicalError().errorDialog();
        }
    }

    /**
     * 
     */
    @Action
    public void checkLatestVersionAction() {
        String lv = getNewestVersionNumber();
        if (lv != null && lv.trim().length() > 0) {
            latestVersionTextField.setText(lv);
            latestVersionTextField.setEnabled(true);
            if (!lv.trim().equalsIgnoreCase(versionInstalledTextField.getText())) {
                JOptionPane.showInternalMessageDialog(CanRegClientApp.getApplication().getMainFrame().getContentPane(), java.util.ResourceBundle.getBundle("canreg/client/gui/management/resources/OptionsFrame").getString("NOT_THE_LATEST_VERSION_INSTALLED"), java.util.ResourceBundle.getBundle("canreg/client/gui/management/resources/OptionsFrame").getString("MESSAGE"), JOptionPane.WARNING_MESSAGE);
            } else {
                JOptionPane.showInternalMessageDialog(CanRegClientApp.getApplication().getMainFrame().getContentPane(), java.util.ResourceBundle.getBundle("canreg/client/gui/management/resources/OptionsFrame").getString("LATEST_VERSION_INSTALLED."), java.util.ResourceBundle.getBundle("canreg/client/gui/management/resources/OptionsFrame").getString("MESSAGE"), JOptionPane.INFORMATION_MESSAGE);
            }
        } else {
            JOptionPane.showInternalMessageDialog(CanRegClientApp.getApplication().getMainFrame().getContentPane(), java.util.ResourceBundle.getBundle("canreg/client/gui/management/resources/OptionsFrame").getString("NO_INFORMATION"), java.util.ResourceBundle.getBundle("canreg/client/gui/management/resources/OptionsFrame").getString("MESSAGE"), JOptionPane.ERROR_MESSAGE);
        }
    }

    @Action
    public void browseForR() {
        String path = "";
        if (rInstallationTextField.getText().trim().length() > 0) {
            path = rInstallationTextField.getText();
        }
        JFileChooser chooser = new JFileChooser(path);
        int choice = chooser.showDialog(jLabel2, "OK");
        if (choice == JFileChooser.APPROVE_OPTION && chooser.getSelectedFile() != null) {
            rInstallationTextField.setText(chooser.getSelectedFile().getAbsolutePath());
        }
    }

    @Action
    public void viewChangeLogAction() {
        crcv.showChangeLog();
    }

    @Action
    public void browseForGS() {
        String path = "";
        if (gsInstallationTextField.getText().trim().length() > 0) {
            path = gsInstallationTextField.getText();
        }
        JFileChooser chooser = new JFileChooser(path);
        int choice = chooser.showDialog(jLabel2, "OK");
        if (choice == JFileChooser.APPROVE_OPTION && chooser.getSelectedFile() != null) {
            gsInstallationTextField.setText(chooser.getSelectedFile().getAbsolutePath());
        }
    }
    
}
